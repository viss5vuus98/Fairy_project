@model IEnumerable<Fairy_project.Models.Exhibition>

@section Style
{
    <link rel="stylesheet" href="~/css/Master.css" asp-append-version="true" />
}

<div class="container">
    <div class="row mb-3">
        @foreach (var item in Model)
        {
            <div class="col-lg-4 col-md-6 col-12 my-4 overflow-hidden">
                <a href="" class="overflow-hidden">
                    <img class="w-100 h-100 rounded-3" src="@(Url.Content($"~/images/{item.exhibit_Pre_img}"))" alt="">
                </a>
            </div>
        }
   </div>
    <div class="row my-3">
        <div class="col-lg-6 col-12">
            <div class="bg-secondary bg-opacity-25  h-100 rounded-3 py-3">
                <div class="h-25 w-100 justify-content-center align-items-center d-flex">
                    <div class="w-75 h-75 bg-light rounded-pill my-3 mx-5 text-center">
                        <h1 id="name" class="my-1">合展屋</h1>
                    </div>
                    <span class="h-50 badge bg-warning text-black fs-4 fw-light my-3 me-5">籌備</span>
                </div>
                <div class="h-25 w-100 justify-content-evenly align-items-center d-flex">
                    <h3>已承租廠商數</h3>
                    <h2 id="manufacturer" class="fw-bold">54</h2>
                </div>
                <div class="h-25 w-100 justify-content-evenly align-items-center d-flex">
                    <h3>本日進場人數</h3>
                    <h2 id="soldticket" class="fw-bold">0</h2>
                </div>
                <div class="h-25 w-100 justify-content-evenly align-items-center d-flex">
                    <button class="w-25 h-75 btn btn-dark fs-4">編輯詳細</button>
                    <button class="w-25 h-75 btn btn-danger fs-4">刪除展覽</button>
                </div>
            </div>
        </div>
        <div class="col-lg-6 col-12 overflow-hidden bg1 rounded-3">
            <div id="columnchart_values" class="w-100"></div>
        </div>
    </div>
</div>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"
    integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/@@popperjs/core@2.10.1/dist/umd/popper.min.js"
    integrity="sha384-W8fXfP3gkOKtndU4JGtKDvXbO53Wy8SZCQHczT5FMiiqmQfUpWbYdTil/SxwZgAN"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.min.js"
    integrity="sha384-skAcpIdS7UcVUC05LJ9Dxay8AXcDYfBJqt1CJ85S/CFujBsIzCIv+l9liuYLaMQ/"
    crossorigin="anonymous"></script>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

<script>
    google.charts.load("current", {
        packages: ["corechart"],
    });

    google.charts.setOnLoadCallback(drawChart);


    var chartwidth;
    $(window).resize(() => {
        if ($(window).width > 960) {
            chartwidth = 800;
        }
        else if ($(window).width > 720) {
            chartwidth = 650;
        }
        else if ($(window).width > 540) {
            chartwidth = 600;
        }
        google.charts.setOnLoadCallback(drawChart);
    })


    function drawChart() {
        var data = google.visualization.arrayToDataTable([
            ['week', 'sold', { role: 'style' }],
            ['Mon', 511, '#E5E4E2'],
            ['Tue', 433, '#E5E4E2'],
            ['Wed', 521, '#E5E4E2'],
            ['Thu', 132, '#E5E4E2'],
            ['Fri', 200, '#E5E4E2'],
            ['Sat', 212, '#E5E4E2'],
            ['Sun', 127, '#5C5858'],
        ]);

        var view = new google.visualization.DataView(data);
        view.setColumns([0, 1,
            {
                type: "string",
                role: "annotation"
            },
            2]);

        var options = {
            title: "Fairy",
            width: chartwidth,
            height: 400,
            bar: { groupWidth: "70%" },
            legend: "none",
            backgroundColor: '#FEFCFF',
            vAxis: { gridlines: { count: 0 } }
        };
        var chart = new google.visualization.ColumnChart(document.getElementById("columnchart_values"));
        chart.draw(view, options);
    }

    var exhibitiondata = [
        {
            name: '合展woo1',
            manufacturer: 13,
            soldticket: 200
        },
        {
            name: '合展woo2',
            manufacturer: 46,
            soldticket: 100
        },
        {
            name: '合展woo3',
            manufacturer: 7,
            soldticket: 300
        },
        {
            name: '合展woo4',
            manufacturer: 10,
            soldticket: 400
        }
    ]

    $('.container').first().find('a').on('click', (e) => {
        e.preventDefault();
        $('#name').text(`${exhibitiondata[$(event.target).parents('div').index()].name}`);
        $('#manufacturer').text(`${exhibitiondata[$(event.target).parents('div').index()].manufacturer}`);
        $('#soldticket').text(`${exhibitiondata[$(event.target).parents('div').index()].soldticket}`);
    })

</script>
